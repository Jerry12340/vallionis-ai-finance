{% extends "base.html" %}

{% block title %}Macro Dashboard - Vallionis AI Finance{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1 class="mb-4">Macroeconomic Dashboard</h1>
    
    <!-- GDP Comparison Chart Section -->
    <div class="card mb-4">
        <div class="card-header">
            <h2>GDP Comparison: Real vs Nominal</h2>
        </div>
        <div class="card-body">
            {% if gdp_chart %}
                {{ gdp_chart|safe }}
            {% else %}
                <div class="alert alert-warning">GDP comparison chart is currently unavailable.</div>
            {% endif %}
        </div>
    </div>
    
    <!-- Economic Indicators Overview -->
    {% if indicators %}
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h3>Key Economic Indicators</h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <div class="card h-100 border-0 shadow-sm">
                                <div class="card-body">
                                    <h5 class="card-title text-primary">GDP (Real)</h5>
                                    <h3 class="mb-0">${{ "%.1f"|format(indicators.gdp.latest_value) }}B</h3>
                                    <small class="text-muted">2012 Chained Dollars</small>
                                    <div class="mt-2">
                                        <small>Last updated: {{ indicators.gdp.latest_date }}</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="card h-100 border-0 shadow-sm">
                                <div class="card-body">
                                    <h5 class="card-title text-primary">Inflation (CPI)</h5>
                                    <h3 class="mb-0">{{ "%.2f"|format(indicators.inflation.latest_value) }}</h3>
                                    <small class="text-muted">Index (1982-84=100)</small>
                                    <div class="mt-2">
                                        <small>Last updated: {{ indicators.inflation.latest_date }}</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="card h-100 border-0 shadow-sm">
                                <div class="card-body">
                                    <h5 class="card-title text-primary">Unemployment Rate</h5>
                                    <h3 class="mb-0">{{ "%.1f"|format(indicators.unemployment.latest_value) }}%</h3>
                                    <small class="text-muted">% of labor force</small>
                                    <div class="mt-2">
                                        <small>Last updated: {{ indicators.unemployment.latest_date }}</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Detailed Indicators Section -->
    <div class="card">
        <div class="card-header">
            <h3>Detailed Economic Indicators</h3>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="card-header">
                            <h5 class="card-title mb-0">Federal Funds Rate</h5>
                            <small class="text-muted">Percent</small>
                        </div>
                        <div class="card-body">
                            {% if indicators.fed_funds %}
                            <h2 class="display-4 text-center {{ 'text-success' if indicators.fed_funds.latest_value < 3 else 'text-warning' }}">
                                {{ "%.2f"|format(indicators.fed_funds.latest_value) }}%
                            </h2>
                            <div class="text-center text-muted">
                                <small>Last updated: {{ indicators.fed_funds.latest_date }}</small>
                            </div>
                            {% else %}
                            <p class="text-muted">Data not available</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <div class="col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="card-header">
                            <h5 class="card-title mb-0">10-Year Treasury Yield</h5>
                            <small class="text-muted">Percent</small>
                        </div>
                        <div class="card-body">
                            {% if indicators.treasury_10y %}
                            <h2 class="display-4 text-center {{ 'text-success' if indicators.treasury_10y.latest_value < 3 else 'text-warning' }}">
                                {{ "%.2f"|format(indicators.treasury_10y.latest_value) }}%
                            </h2>
                            <div class="text-center text-muted">
                                <small>Last updated: {{ indicators.treasury_10y.latest_date }}</small>
                            </div>
                            {% else %}
                            <p class="text-muted">Data not available</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<!-- Plotly.js for interactive charts -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<script>
// Make tables responsive
$(document).ready(function() {
    $('table').addClass('table-responsive');
    
    // Add tooltips to indicators
    $('[data-toggle="tooltip"]').tooltip();
});
</script>
{% endblock %}
